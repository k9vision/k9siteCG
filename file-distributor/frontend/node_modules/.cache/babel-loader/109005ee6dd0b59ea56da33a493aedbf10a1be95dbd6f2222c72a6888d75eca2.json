{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{ToastContainer}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{ThemeProvider,createTheme}from'@mui/material/styles';import CssBaseline from'@mui/material/CssBaseline';import{jwtDecode}from'jwt-decode';import Dashboard from'./components/Dashboard';import FileUploader from'./components/FileUploader';import RecipientManager from'./components/RecipientManager';import ScheduleManager from'./components/ScheduleManager';import CampaignBuilder from'./components/CampaignBuilder';import Navigation from'./components/Navigation';import Login from'./components/Login';import AdminDashboard from'./components/AdminDashboard';import ClientDashboard from'./components/ClientDashboard';import LandingPage from'./components/LandingPage';import'./styles/App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const theme=createTheme({palette:{primary:{main:'#2196f3'},secondary:{main:'#f50057'}}});function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[userRole,setUserRole]=useState(null);const[uploadedFiles,setUploadedFiles]=useState([]);useEffect(()=>{const token=localStorage.getItem('token');if(token){try{const decoded=jwtDecode(token);setIsAuthenticated(true);setUserRole(decoded.role);}catch(error){localStorage.removeItem('token');}}},[]);const handleLogin=(token,user)=>{localStorage.setItem('token',token);setIsAuthenticated(true);setUserRole(user.role);};const handleLogout=()=>{localStorage.removeItem('token');setIsAuthenticated(false);setUserRole(null);};const getDashboardRoute=()=>{if(userRole==='admin'){return'/admin';}else if(userRole==='client'){return'/client';}return'/dashboard';};return/*#__PURE__*/_jsxs(ThemeProvider,{theme:theme,children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[isAuthenticated&&/*#__PURE__*/_jsx(Navigation,{onLogout:handleLogout,userRole:userRole}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:!isAuthenticated?/*#__PURE__*/_jsx(LandingPage,{}):/*#__PURE__*/_jsx(Navigate,{to:getDashboardRoute()})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:!isAuthenticated?/*#__PURE__*/_jsx(Login,{onLogin:handleLogin}):/*#__PURE__*/_jsx(Navigate,{to:getDashboardRoute()})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:isAuthenticated&&userRole==='admin'?/*#__PURE__*/_jsx(AdminDashboard,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/client\",element:isAuthenticated&&userRole==='client'?/*#__PURE__*/_jsx(ClientDashboard,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:isAuthenticated&&userRole==='admin'?/*#__PURE__*/_jsx(Dashboard,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/upload\",element:isAuthenticated&&userRole==='admin'?/*#__PURE__*/_jsx(FileUploader,{setUploadedFiles:setUploadedFiles}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/recipients\",element:isAuthenticated&&userRole==='admin'?/*#__PURE__*/_jsx(RecipientManager,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/schedule\",element:isAuthenticated&&userRole==='admin'?/*#__PURE__*/_jsx(ScheduleManager,{uploadedFiles:uploadedFiles}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/campaigns\",element:isAuthenticated&&userRole==='admin'?/*#__PURE__*/_jsx(CampaignBuilder,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})})]}),/*#__PURE__*/_jsx(ToastContainer,{position:\"bottom-right\"})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","ToastContainer","ThemeProvider","createTheme","CssBaseline","jwtDecode","Dashboard","FileUploader","RecipientManager","ScheduleManager","CampaignBuilder","Navigation","Login","AdminDashboard","ClientDashboard","LandingPage","jsx","_jsx","jsxs","_jsxs","theme","palette","primary","main","secondary","App","isAuthenticated","setIsAuthenticated","userRole","setUserRole","uploadedFiles","setUploadedFiles","token","localStorage","getItem","decoded","role","error","removeItem","handleLogin","user","setItem","handleLogout","getDashboardRoute","children","className","onLogout","path","element","to","onLogin","position"],"sources":["/home/kirlewubuntu/Downloads/PROJECTCOLLABS/gee/file-distributor/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { ThemeProvider, createTheme } from '@mui/material/styles';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport { jwtDecode } from 'jwt-decode';\n\nimport Dashboard from './components/Dashboard';\nimport FileUploader from './components/FileUploader';\nimport RecipientManager from './components/RecipientManager';\nimport ScheduleManager from './components/ScheduleManager';\nimport CampaignBuilder from './components/CampaignBuilder';\nimport Navigation from './components/Navigation';\nimport Login from './components/Login';\nimport AdminDashboard from './components/AdminDashboard';\nimport ClientDashboard from './components/ClientDashboard';\nimport LandingPage from './components/LandingPage';\nimport './styles/App.css';\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#2196f3',\n    },\n    secondary: {\n      main: '#f50057',\n    },\n  },\n});\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [userRole, setUserRole] = useState(null);\n  const [uploadedFiles, setUploadedFiles] = useState([]);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      try {\n        const decoded = jwtDecode(token);\n        setIsAuthenticated(true);\n        setUserRole(decoded.role);\n      } catch (error) {\n        localStorage.removeItem('token');\n      }\n    }\n  }, []);\n\n  const handleLogin = (token, user) => {\n    localStorage.setItem('token', token);\n    setIsAuthenticated(true);\n    setUserRole(user.role);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    setIsAuthenticated(false);\n    setUserRole(null);\n  };\n\n  const getDashboardRoute = () => {\n    if (userRole === 'admin') {\n      return '/admin';\n    } else if (userRole === 'client') {\n      return '/client';\n    }\n    return '/dashboard';\n  };\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <Router>\n        <div className=\"App\">\n          {isAuthenticated && <Navigation onLogout={handleLogout} userRole={userRole} />}\n          <Routes>\n            <Route\n              path=\"/\"\n              element={\n                !isAuthenticated ?\n                <LandingPage /> :\n                <Navigate to={getDashboardRoute()} />\n              }\n            />\n            <Route\n              path=\"/login\"\n              element={\n                !isAuthenticated ?\n                <Login onLogin={handleLogin} /> :\n                <Navigate to={getDashboardRoute()} />\n              }\n            />\n            <Route\n              path=\"/admin\"\n              element={\n                isAuthenticated && userRole === 'admin' ?\n                <AdminDashboard /> :\n                <Navigate to=\"/login\" />\n              }\n            />\n            <Route\n              path=\"/client\"\n              element={\n                isAuthenticated && userRole === 'client' ?\n                <ClientDashboard /> :\n                <Navigate to=\"/login\" />\n              }\n            />\n            <Route\n              path=\"/dashboard\"\n              element={\n                isAuthenticated && userRole === 'admin' ?\n                <Dashboard /> :\n                <Navigate to=\"/login\" />\n              }\n            />\n            <Route\n              path=\"/upload\"\n              element={\n                isAuthenticated && userRole === 'admin' ?\n                <FileUploader setUploadedFiles={setUploadedFiles} /> :\n                <Navigate to=\"/login\" />\n              }\n            />\n            <Route\n              path=\"/recipients\"\n              element={\n                isAuthenticated && userRole === 'admin' ?\n                <RecipientManager /> :\n                <Navigate to=\"/login\" />\n              }\n            />\n            <Route\n              path=\"/schedule\"\n              element={\n                isAuthenticated && userRole === 'admin' ?\n                <ScheduleManager uploadedFiles={uploadedFiles} /> :\n                <Navigate to=\"/login\" />\n              }\n            />\n            <Route\n              path=\"/campaigns\"\n              element={\n                isAuthenticated && userRole === 'admin' ?\n                <CampaignBuilder /> :\n                <Navigate to=\"/login\" />\n              }\n            />\n          </Routes>\n          <ToastContainer position=\"bottom-right\" />\n        </div>\n      </Router>\n    </ThemeProvider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}